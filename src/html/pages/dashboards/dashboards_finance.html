<div class="main__content content-main" data-content="dashboards/finance">
  <form class="main__filter form-filter-dashboards" style="justify-content: stretch;">
    <label class="main__date-filter">
      <svg class='icon icon-calendar'>
        <use xlink:href='#calendar'></use>
      </svg>
      <input type="text" class="input-date-filter" name="date" placeholder="Дата">
    </label>
  </form>

  <!-- <div class="widgets">
    <div class="widgets__item col-2">
      <div class="widgets__item_img">
        <img src="img/icons/coins.png" alt="Иконка">
      </div>
      <div class="widgets__item_content" scroll-to='.dashboards__table;{"show_what":"reestr"}'>
        <span class="value" data-render-widget="reestr_sum" price></span>
        <span class="name">Средств в реестре за выбранный <u class="hover-line" data-render-tippy="dates,end"
            price>период</u></span></span>
      </div>
      <div class="widgets__item_content last" scroll-to='.dashboards__table;{"show_what":"rest_in_reestr"}'>
        <span class="value" data-render-widget="rest_in_reestr" price></span>
        <span class="name">Осталось в реестре</span>
      </div>
    </div>
    <div class="widgets__item col-2">
      <div class="widgets__item_img">
        <img src="img/icons/coins.png" alt="Иконка">
      </div>
      <div class="widgets__item_content" scroll-to='.dashboards__table;{"show_what":"revenue"}'>
        <span class="value" data-render-widget="revenue" price></span>
        <span class="name">Выручка за выбранный <u class="hover-line" data-render-tippy="dates,end"
            price>период</u></span>
      </div>
      <div class="widgets__item_content last" scroll-to='.dashboards__table;{"show_what":"revenue_new"}'>
        <span class="value" data-render-widget="new_clients_revenue" price></span>
        <span class="name">Выручка от новых клиентов за выбранный <u class="hover-line"
            data-render-tippy="dates,end">период</u></span>
      </div>
    </div>
    <div class="widgets__item col-2">
      <div class="widgets__item_img">
        <img src="img/icons/coins.png" alt="Иконка">
      </div>
      <div class="widgets__item_content" scroll-to='.dashboards__table;{"show_what":"revenue_new_rent"}'>
        <span class="value" data-render-widget="new_clients_revenue_rent" price></span>
        <span class="name">Сборы по аренде от новых клиентов за выбранный <u class="hover-line"
            data-render-tippy="dates,end" price>период</u></span>
      </div>
      <div class="widgets__item_content last" scroll-to='.dashboards__table;{"show_what":"revenue_new_deposit"}'>
        <span class="value" data-render-widget="new_clients_revenue_deposit" price></span>
        <span class="name">Сборы по депозитам от новых клиентов за выбранный <u class="hover-line"
            data-render-tippy="dates,end">период</u></span>
      </div>
    </div>
    <div class="widgets__item col-2">
      <div class="widgets__item_img">
        <img src="img/icons/coins.png" alt="Иконка">
      </div>
      <div class="widgets__item_content" scroll-to='.dashboards__table;{"show_what":"revenue_rent"}'>
        <span class="value" data-render-widget="revenue_rent" price></span>
        <span class="name">Сборы по аренде за выбранный <u class="hover-line" data-render-tippy="dates,end"
            price>период</u></span>
      </div>
      <div class="widgets__item_content last" scroll-to='.dashboards__table;{"show_what":"revenue_deposit"}'>
        <span class="value" data-render-widget="revenue_deposit" price></span>
        <span class="name">Сборы по депозитам за выбранный <u class="hover-line" data-render-tippy="dates,end"
            price>период</u></span>
      </div>
    </div>
    <div class="widgets__item col-2">
      <div class="widgets__item_img">
        <img src="img/icons/coins.png" alt="Иконка">
      </div>
      <div class="widgets__item_content" scroll-to='.dashboards__table'>
        <span class="value" data-render-widget="current_avg_price_per_room,/м²" price2></span>
        <span class="name">Средняя ставка аренды за выбранный <u class="hover-line"
            data-render-tippy="dates,end">период</u></span>
      </div>
      <div class="widgets__item_content last" scroll-to='.dashboards__table'>
        <span class="value" data-render-widget="avg_price_per_room,/м²" price2></span>
        <span class="name">Средняя ставка за все время</span>
      </div>
    </div>
    <div class="widgets__item col-2">
      <div class="widgets__item_img">
        <img src="img/icons/coins.png" alt="Иконка">
      </div>
      <div class="widgets__item_content" scroll-to='.dashboards__table;{"show_what":"deposits"}'>
        <span class="value" data-render-widget="revenue_deposit_today" price></span>
        <span class="name">Текущая сумма депозитов</span>
      </div>
      <div class="widgets__item_content last" scroll-to='.dashboards__table;{"show_what":"total_reestr"}'>
        <span class="value" data-render-widget="total_reestr" price></span>
        <span class="name">Средств в реестре всего</span>
      </div>
    </div>
  </div> -->

  <div class="grid grid-cols-3 gap-4 max-[1530px]:grid-cols-2 max-[800px]:grid-cols-1">
    <div class="border border-solid border-[#e1e8f0] rounded-2xl bg-white p-4 wp-chart"
      style="box-shadow: 0 4px 4px 0 rgba(0, 0, 0, 0.25);">
      <div class="flex justify-between gap-3 items-start w-full">
        <div class="text-[#64748b] text-sm font-medium leading-[100%]">
          Сумма арендной платы <br> с действующих клиентов (всего)
        </div>
        <div class="text-sm font-bold flex items-center gap-1">
          <svg width="7" height="7" viewBox="0 0 7 7" fill="none" xmlns="http://www.w3.org/2000/svg" class="shrink-0">
            <path d="M5.83586 1.98802L0.823461 7L0 6.17661L5.0124 1.16463H0.59401V0H7V6.40546H5.83527L5.83586 1.98802Z"
              fill="#5FC057" />
          </svg>
          <span class="total-reestr-percent">23%</span>
        </div>
      </div>
      <div class="text-[32px] font-bold text-[#1c2434] mt-1" data-render-widget="total_reestr" price
        scroll-to='.dashboards__table;{"show_what":"total_reestr"}'></div>
      <p class="font-medium text-xs text-[#64748b] mt-1">Количество активных договоров: <b
          data-render-widget="cnt_active_agrs">183</b>
      </p>
      <div class="flex justify-between gap-3 mt-2 max-[420px]:flex-col">
        <div class="border border-solid border-[#e1e8f0] p-2 rounded-lg flex-1 flex flex-col gap-1"
          scroll-to='.dashboards__table;{"show_what":"reestr"}' data-render-tippy="reestr_sum_extra" custom>
          <p class="text-xs font-medium text-[#64748b]">
            Сумма арендной платы за выбранный
            <span class="underline underline-offset-4 cursor-pointer hover:no-underline" data-render-tippy="dates,end"
              price>период</span>
          </p>
          <b class="text-lg text-[#1c2434] mt-auto max-[1800px]:text-sm" data-render-widget="reestr_sum" price></b>
        </div>
        <div class="border border-solid border-[#e1e8f0] p-2 rounded-lg flex-1 flex flex-col"
          scroll-to='.dashboards__table;{"show_what":"reestr_future"}'>
          <p class="text-xs font-medium text-[#64748b]">
            Сумма в будущих периодах
          </p>
          <b class="text-lg text-[#1c2434] mt-auto max-[1800px]:text-sm" data-render-widget="reestr_sum_future"
            price></b>
        </div>
        <div class="border border-solid border-[#e1e8f0] p-2 rounded-lg flex-1 flex flex-col"
          scroll-to='.dashboards__table;{"show_what":"reestr_past"}'>
          <p class="text-xs font-medium text-[#64748b]">
            Задолженность в прошлых периодах
          </p>
          <b class="text-lg text-[#1c2434] mt-auto max-[1800px]:text-sm" data-render-widget="reestr_sum_past" price></b>
        </div>
      </div>
      <div class="w-full h-[100px] mt-6">
        <canvas id="chart-rent-dynamics" style="max-height: 90px;"></canvas>
        <div id="tooltip-rent-dynamics" class="chart-tooltip"></div>
      </div>
    </div>
    <div class="border border-solid border-[#e1e8f0] rounded-2xl bg-white p-4 wp-chart"
      style="box-shadow: 0 4px 4px 0 rgba(0, 0, 0, 0.25);">
      <div class="text-[#64748b] text-sm font-medium leading-[100%]">
        Выручка (за выбранный <span data-render-tippy="dates,end"
          class="underline underline-offset-4 cursor-pointer hover:no-underline">период</span>)
      </div>
      <div class="text-[32px] font-bold text-[#1c2434] mt-1" data-render-widget="revenue" price
        scroll-to='.dashboards__table;{"show_what":"revenue"}'>
      </div>
      <div class="flex justify-between gap-3 mt-7 max-[800px]:mt-2 max-[420px]:gap-1 max-[380px]:flex-col">
        <div class="border border-solid border-[#e1e8f0] p-2 rounded-lg flex-1 flex flex-col gap-1"
          scroll-to='.dashboards__table;{"show_what":"revenue_old"}'>
          <p class="text-xs font-medium text-[#64748b] max-[420px]:text-[10px] max-[420px]:leading-[100%]">
            Арендная плата за <span class="underline underline-offset-4 cursor-pointer hover:no-underline"
              data-render-tippy="dates,end" price>период</span>
          </p>
          <b class="mt-auto text-lg text-[#1c2434] max-[1800px]:text-sm"
            data-render-widget="revenue_rent-new_clients_revenue_rent" price></b>
        </div>
        <div class="border border-solid border-[#e1e8f0] p-2 rounded-lg flex-1 flex flex-col gap-1"
          scroll-to='.dashboards__table;{"show_what":"revenue_new_rent"}'>
          <p class="text-xs font-medium text-[#64748b] max-[420px]:text-[10px] max-[420px]:leading-[100%]">
            Продажи за <span class="underline underline-offset-4 cursor-pointer hover:no-underline"
              data-render-tippy="dates,end" price>период</span>
          </p>
          <b class="mt-auto text-lg text-[#1c2434] max-[1800px]:text-sm" data-render-widget="new_clients_revenue_rent"
            price></b>
        </div>
        <div class="border border-solid border-[#e1e8f0] p-2 rounded-lg flex-1 flex flex-col gap-1"
          scroll-to='.dashboards__table;{"show_what":"revenue_deposit"}'>
          <p class="text-xs font-medium text-[#64748b] max-[420px]:text-[10px] max-[420px]:leading-[100%]">
            Депозит за <span class="underline underline-offset-4 cursor-pointer hover:no-underline"
              data-render-tippy="dates,end">период</span>
          </p>
          <b class="mt-auto text-lg text-[#1c2434] max-[1800px]:text-sm"
            data-render-widget="new_clients_revenue_deposit" price></b>
        </div>
      </div>
      <div class="flex items-center mt-5 gap-4 justify-between max-[420px]:flex-col-reverse">
        <ul class="flex flex-col gap-1 text-xs flex-shrink-0">
          <li class="flex gap-1 items-center">
            <div class="w-[15px] h-[10px] flex-shrink-0 bg-[#5782A1]"></div>
            <p class="text-[#5782A1]">Выручка</p>
          </li>
          <li class="flex gap-1 items-center">
            <div class="w-[15px] h-[10px] flex-shrink-0 bg-[#E3AA39]"></div>
            <p class="text-[#E3AA39]">Осталось собрать</p>
          </li>
          <li class="flex gap-1 items-center">
            <div class="w-[15px] h-[10px] flex-shrink-0 bg-[#005C9E]"></div>
            <p class="text-[#005C9E]">Планируемый итог</p>
          </li>
        </ul>
        <div class="h-[120px] flex flex-auto items-center justify-center relative w-full max-w-[260px]">
          <canvas id="chart-payment-structure" class="max-h-full max-w-[130px]"></canvas>
          <div id="tooltip-payment-structure" class="chart-tooltip"></div>
          <span
            class="chart-label-left absolute left-0 top-0 -translate-y-1/2 font-semibold text-sm whitespace-nowrap text-[#E3AA39]"></span>
          <span
            class="chart-label-right absolute right-0 top-0 -translate-y-1/2 font-semibold text-sm whitespace-nowrap text-[#5782A1]"></span>
        </div>
      </div>
    </div>
    <div class="border border-solid border-[#e1e8f0] rounded-2xl bg-white p-4 flex flex-col wp-chart"
      style="box-shadow: 0 4px 4px 0 rgba(0, 0, 0, 0.25);">
      <div class="flex items-center justify-between gap-2">
        <p class="text-[#64748b] text-sm font-medium leading-[100%]">
          Средняя ставка за всё время
        </p>
        <b class="text-[32px] font-bold text-[#1c2434] flex-shrink-0" data-render-widget="avg_price_per_room,/м²"
          price2>₽/м</b>
      </div>
      <div class="flex items-center justify-between gap-2 mt-3 mb-2">
        <p class="text-[#64748b] text-sm font-medium leading-[100%]">
          Средняя ставка за выбранный <span data-render-tippy="dates,end"
            class="underline underline-offset-4 cursor-pointer hover:no-underline">период</span>
        </p>
        <b class="text-[32px] font-bold text-[#1c2434] flex-shrink-0"
          data-render-widget="current_avg_price_per_room,/м²" price2>2 000 000 ₽</b>
      </div>
      <div class="mt-auto w-full h-[100px] flex items-end">
        <canvas id="chart-dynamics-avg-rate" style="max-height: 100px;"></canvas>
      </div>
    </div>
    <div class="border border-solid border-[#e1e8f0] rounded-2xl bg-white p-4 flex flex-col"
      style="box-shadow: 0 4px 4px 0 rgba(0, 0, 0, 0.25);">
      <div class="flex items-center justify-between gap-2">
        <p class="text-[#64748b] text-sm font-medium leading-[100%]">
          Сдано м² факт/арендопригодная
        </p>
        <b class="text-[32px] font-bold text-[#1c2434] flex-shrink-0">
          <span data-render-widget="area_rented"></span>
          /
          <span data-render-widget="area_total"></span>
          м²
        </b>
      </div>
      <div class="flex items-center justify-between gap-2 mt-3 mb-2">
        <p class="text-[#64748b] text-sm font-medium leading-[100%]">
          Сдано м²
          сегодня/за <span data-render-tippy="dates,end"
            class="underline underline-offset-4 cursor-pointer hover:no-underline">период</span>
        </p>
        <b class="text-[32px] font-bold text-[#1c2434] flex-shrink-0">
          <span data-render-widget="inflow_area" data-condition="inflow_area>inflow_area_planned"></span>
          /
          <span data-render-widget="inflow_area_accumulated"
            data-condition="inflow_area_accumulated>inflow_area_accumulated_planned"></span>
          м²
        </b>
      </div>
      <div class="flex items-center justify-between gap-2">
        <p class="text-[#64748b] text-sm font-medium leading-[100%]">
          Сдача м² факт/план нарастающим итогом
        </p>
        <b class="text-[32px] font-bold text-[#1c2434] flex-shrink-0">
          <span data-render-widget="inflow_area_accumulated"></span>
          /
          <span data-render-widget="inflow_area_accumulated_planned"></span>
          м²
        </b>
      </div>
    </div>
  </div>

  <div class="visualization">
    <h4 class="chart__title" style="flex: 1 1 100%;">Сборы по реестру за <span date-range></span></h4>
    <div class="chart__info">
      <p>
        <i class="_circle fact" style="color: #0B704E;"></i>
        <span>Сборы по реестру</span>
      </p>
      <!-- <p>
        <i class="_circle plan" style="color: #E03D3D;"></i>
        <span>План</span>
      </p> -->
      <p>
        <i class="_circle plan" style="color: #EFBB34;"></i>
        <span>Осталось собрать</span>
      </p>
      <p>
        <i class="_circle debitors" style="color: #e03d3d;"></i>
        <span>Дебиторская задолженность</span>
      </p>
    </div>
    <div style="position: relative; width: 100%; height: 15px;">
      <p class="visualization-difference difference-fact-plan text-error"
        style="transform: translateX(-50%); position: absolute;"
        scroll-to='.dashboards__table;{"show_what":"debitors"}'>
      </p>
      <p class="visualization-difference text-info needs-collected-mont" style="position: absolute; right: 0;"
        scroll-to='.dashboards__table;{"show_what":"reestr"}'></p>
    </div>
    <div class="visualization__content">
      <div class="visualization__item visualization-fact" style="color: #0b704e;background: #cff1e6;"
        scroll-to='.dashboards__table;{"show_what":"reestr_revenue"}'>
      </div>
      <!-- <div class="visualization__item visualization-plan" style="color: #E03D3D; background: rgba(255, 207, 207, 1);">
      </div> -->
      <div class="visualization__item visualization-remains-deposit" style="color: #efbb34; background: #fcf1d6;"
        scroll-to='.dashboards__table;{"show_what":"rest_in_reestr"}'>
      </div>
    </div>
  </div>

  <div class="charts">
    <div class="chart" style="flex: 1 1 50%; width: 100%; min-height: 400px;">
      <div class="chart__header" style="align-items: center; flex-wrap: wrap;">
        <div style="flex: 1 1 100%; display: flex; justify-content: space-between; flex-wrap: wrap; gap: 15px;">
          <h4 class="chart__title">Выручка за <span date-range></span></h4>
          <div class="chart__info-calc">
            <p>
              <b>План на месяц:</b> <input type="text" name="revenue_planned" class="plan-month-value input-passport"
                style="width: 110px;" autocomplete="off">
              <button class="button btn-set-plan">
                <svg class="icon icon-edit edit" style="stroke: #fff;">
                  <use xlink:href="#edit"></use>
                </svg>
              </button>
            </p>
          </div>
        </div>
        <div class="chart__info-calc">
          <p><b>Факт:</b> <span class="fact-value"></span></p>
          <p><b>План:</b> <span class="plan-value"></span></p>
          <p><b>Отклонение:</b> <span class="delta-value"></span></p>
        </div>
        <div style="display: flex; align-items: center; gap: 25px;">
          <div class="chart__info">
            <p>
              <i class="_circle fact"></i>
              <span>Факт</span>
            </p>
            <p>
              <i class="_circle plan"></i>
              <span style="color: #3d50e0;">План</span>
            </p>
          </div>
        </div>
      </div>
      <div class="chart__body">
        <canvas id="chart-revenue" style="max-height: 260px;"></canvas>
        <div id="tooltip-revenue" class="chart-tooltip"></div>
      </div>
    </div>
  </div>

  <div class="dashboards__table _my-accordion" data-accordion-open data-max-height="845">
    <button class="dashboards__table-toggle btn-toggle-table _my-accordion-control">
      <span>Платежи</span>
      <svg class='icon icon-arrow-fill'>
        <use xlink:href='#arrow-fill'></use>
      </svg>
    </button>
    <div class="flex items-center flex-wrap gap-6">
      <div class="filter__block_content" style="max-width: 200px; position: relative;">
        <span style="position: absolute; left: 0; bottom: 100%; font-size: 12px;">Площадь:</span>
        <div class="filter__wp-input">
          <span class="pref">от</span>
          <input type="number" name="start_area" value="0" class="filter__input input-filter" inputmode="decimal"
            autocomplete="off" step="0.1" min="0" max="1000" data-step="0.1" style="height: 40px; font-size: 14px;">
        </div>
        <div class="filter__wp-input">
          <span class="pref">до</span>
          <input type="number" name="end_area" value="1000" class="filter__input input-filter" inputmode="decimal"
            autocomplete="off" step="0.1" min="0" max="1000" data-step="0.1" style="height: 40px; font-size: 14px;">
        </div>
      </div>
      <div class="filter__block_content" style="position: relative; max-width: 200px;">
        <label class="wrapper-checkbox">
          <input type="checkbox" name="without-large-cells" class="input-checkbox" id="dashboards-finance-checkbox-1">
          <label class="label-checkbox" for="dashboards-finance-checkbox-1">
            <svg class='icon'>
              <use xlink:href='#check-3'></use>
            </svg>
          </label>
          <p>Без больших ячеек</p>
        </label>
      </div>
    </div>
    <div class="table _my-accordion-content" style="height: 841px; max-height: none;">
      <div class="table__top">
        <form class="table__form form-table-search">
          <!-- <div class="wp-input wp-input-search">
            <input type="text" name="search_str" placeholder="Поиск" class="input input-table-search" autocomplete="off"
              inputmode="search">
            <button type="submit" class="button-icon-search">
              <svg class='icon icon-search'>
                <use xlink:href='#search'></use>
              </svg>
            </button>
          </div> -->
          <select name="show_what" class="init-custom-select" data-special-select="select-filter-table"
            data-select-min-width="200"
            data-input-html="<svg class='icon icon-arrow'><use xlink:href='#arrow'></use></svg>">
            <option value="reestr">Сумма арендной платы за выбранный период</option>
            <option value="total_reestr">Сумма арендной платы всего</option>
            <option value="reestr_revenue">Сборы по реестру</option>
            <option value="rest_in_reestr">Осталось в реестре</option>
            <option value="reestr_future">Сумма арендной платы в будущих периодах</option>
            <option value="reestr_past">Задолженность в прошлых периодах</option>
            <option value="revenue">Выручка</option>
            <option value="revenue_old">Арендная плата за период</option>
            <option value="revenue_deposit">Сборы по депозитам</option>
            <option value="debitors">Дебиторы</option>
            <option value="revenue_new_rent">Продажи за период</option>
          </select>
        </form>
        <div class="table__buttuns">
          <button class="table__button button-table btn-filter-reset">
            <span>Сбросить фильтры</span>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" class="icon">
              <path
                d="M22.5,9A7.4522,7.4522,0,0,0,16,12.792V8H14v8h8V14H17.6167A5.4941,5.4941,0,1,1,22.5,22H22v2h.5a7.5,7.5,0,0,0,0-15Z" />
              <path
                d="M26,6H4V9.171l7.4142,7.4143L12,17.171V26h4V24h2v2a2,2,0,0,1-2,2H12a2,2,0,0,1-2-2V18L2.5858,10.5853A2,2,0,0,1,2,9.171V6A2,2,0,0,1,4,4H26Z" />
            </svg>
          </button>
          <button class="table__button button-table btn-table-upload-excel" data-count>
            <span>Выгрузить в Excel</span>
            <svg class='icon icon-dow'>
              <use xlink:href='#dow'></use>
            </svg>
          </button>
        </div>
      </div>
      <div class="table__content table-payments ag-theme-quartz" style="height: 100%;"></div>
    </div>
  </div>
</div>